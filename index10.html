<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>موقع تشفير متقدم - Advanced Encryption Site</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        h1 {
            margin-bottom: 10px;
        }
        
        .language-switcher {
            position: absolute;
            top: 15px;
            left: 15px;
        }
        
        .language-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            padding: 12px 24px;
            background-color: var(--light-color);
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            border-radius: 5px 5px 0 0;
            margin: 0 5px;
        }
        
        .tab-btn.active {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .tab-content {
            display: none;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        textarea, input[type="text"], input[type="password"], select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        textarea {
            min-height: 150px;
            resize: vertical;
        }
        
        button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        button:hover {
            background-color: var(--primary-color);
        }
        
        .result-area {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 4px;
            border: 1px dashed #ccc;
            min-height: 100px;
        }
        
        .key-display {
            word-break: break-all;
            font-family: monospace;
            padding: 10px;
            background-color: #f1f1f1;
            border-radius: 4px;
            margin-top: 10px;
            position: relative;
        }
        
        .key-actions {
            position: absolute;
            top: 10px;
            left: 10px;
            display: flex;
            gap: 5px;
        }
        
        .key-action-btn {
            background: rgba(0, 0, 0, 0.1);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .key-action-btn:hover {
            background: rgba(0, 0, 0, 0.2);
        }
        
        .advanced-options {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
            border: 1px solid #eee;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #7f8c8d;
        }
        
        .library-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 10px;
            background-color: var(--secondary-color);
            color: white;
        }
        
        .password-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .option-group {
            margin-bottom: 15px;
        }
        
        .password-result {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .password-text {
            flex: 1;
            padding: 10px;
            background: #f1f1f1;
            border-radius: 4px;
            word-break: break-all;
        }
        
        .strength-meter {
            height: 10px;
            border-radius: 5px;
            margin-top: 5px;
            background: #eee;
            overflow: hidden;
        }
        
        .strength-fill {
            height: 100%;
            transition: all 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .tab-btn {
                margin-bottom: 5px;
                border-radius: 5px;
            }
            
            .password-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
    
    <!-- إضافة مكتبة CryptoJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="language-switcher">
                <button class="language-btn" id="language-btn">EN</button>
            </div>
            <h1 data-i18n="siteTitle">موقع تشفير الرسائل المتقدم مع مكتبات خارجية</h1>
            <p data-i18n="siteDescription">أدوات متكاملة لتشفير الرسائل وتوليد المفاتيح باستخدام مكتبات التشفير القوية</p>
        </header>
        
        <div class="tabs">
            <button class="tab-btn active" onclick="openTab('encrypt-tab')" data-i18n="encryptTab">تشفير/فك التشفير</button>
            <button class="tab-btn" onclick="openTab('keys-tab')" data-i18n="keysTab">توليد المفاتيح</button>
            <button class="tab-btn" onclick="openTab('password-tab')" data-i18n="passwordTab">توليد كلمات السر</button>
            <button class="tab-btn" onclick="openTab('stego-tab')" data-i18n="stegoTab">التشفير في الصور</button>
            <button class="tab-btn" onclick="openTab('info-tab')" data-i18n="infoTab">معلومات المكتبات</button>
        </div>
        
        <!-- قسم التشفير وفك التشفير -->
        <div id="encrypt-tab" class="tab-content active">
            <h2 data-i18n="encryptTitle">تشفير وفك تشفير الرسائل <span class="library-badge">Web Crypto API + CryptoJS</span></h2>
            
            <div class="form-group">
                <label for="algorithm" data-i18n="algorithmLabel">اختر خوارزمية التشفير:</label>
                <select id="algorithm" onchange="toggleKeyInput()">
                    <option value="caesar" data-i18n="caesarAlgorithm">شيفرة قيصر (Caesar Cipher)</option>
                    <option value="aes-basic" data-i18n="aesBasicAlgorithm">AES أساسي (تشفير داخلي)</option>
                    <option value="aes-cryptojs" data-i18n="aesCryptoJSAlgorithm">AES باستخدام CryptoJS</option>
                    <option value="aes-webcrypto" data-i18n="aesWebCryptoAlgorithm">AES باستخدام Web Crypto API</option>
                    <option value="rsa-basic" data-i18n="rsaBasicAlgorithm">RSA أساسي (تشفير داخلي)</option>
                    <option value="rsa-cryptojs" data-i18n="rsaCryptoJSAlgorithm">RSA باستخدام CryptoJS</option>
                    <option value="base64" data-i18n="base64Algorithm">Base64 (ترميز)</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="message" data-i18n="messageLabel">النص المراد تشفيره/فك تشفيره:</label>
                <textarea id="message" placeholder="أدخل النص هنا..." data-i18n-ph="messagePlaceholder"></textarea>
            </div>
            
            <div class="form-group" id="key-input">
                <label for="encryption-key" data-i18n="keyLabel">مفتاح التشفير:</label>
                <input type="text" id="encryption-key" placeholder="أدخل المفتاح..." data-i18n-ph="keyPlaceholder">
            </div>
            
            <div class="form-group" id="password-section">
                <label for="password" data-i18n="passwordLabel">كلمة المرور (اختياري):</label>
                <input type="password" id="password" placeholder="أدخل كلمة مرور إضافية..." data-i18n-ph="passwordPlaceholder">
            </div>
            
            <div class="advanced-options">
                <h3 data-i18n="advancedOptions">خيارات متقدمة</h3>
                <div class="form-group">
                    <label for="iterations" data-i18n="iterationsLabel">عدد التكرارات (لتعزيز الأمان):</label>
                    <input type="number" id="iterations" value="1" min="1">
                </div>
            </div>
            
            <button onclick="encrypt()" data-i18n="encryptButton">تشفير</button>
            <button onclick="decrypt()" data-i18n="decryptButton">فك التشفير</button>
            
            <div class="result-area">
                <h3 data-i18n="resultLabel">النتيجة:</h3>
                <div id="encryption-result"></div>
            </div>
        </div>
        
        <!-- قسم توليد المفاتيح -->
        <div id="keys-tab" class="tab-content">
            <h2 data-i18n="keysTitle">توليد مفاتيح التشفير <span class="library-badge">Web Crypto API</span></h2>
            
            <div class="form-group">
                <label for="key-type" data-i18n="keyTypeLabel">نوع المفتاح:</label>
                <select id="key-type">
                    <option value="rsa" data-i18n="rsaKey">RSA (مفتاح عام/خاص)</option>
                    <option value="aes" data-i18n="aesKey">AES (مفتاح متماثل)</option>
                    <option value="ec" data-i18n="eccKey">ECC (منحنيات إهليلجية)</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="key-size" data-i18n="keySizeLabel">حجم المفتاح:</label>
                <select id="key-size">
                    <option value="128" data-i18n="key128">128-بت (AES)</option>
                    <option value="256" data-i18n="key256">256-بت (AES)</option>
                    <option value="2048" data-i18n="key2048">2048-بت (RSA)</option>
                    <option value="4096" data-i18n="key4096">4096-بت (RSA)</option>
                </select>
            </div>
            
            <button onclick="generateKeys()" data-i18n="generateKeysButton">توليد المفاتيح</button>
            
            <div class="result-area">
                <h3 data-i18n="publicKeyLabel">المفتاح العام:</h3>
                <div class="key-display">
                    <div class="key-actions">
                        <button class="key-action-btn" onclick="copyKey('public-key')" title="نسخ">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="key-action-btn" onclick="clearKey('public-key')" title="حذف">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div id="public-key"></div>
                </div>
                
                <h3 data-i18n="privateKeyLabel">المفتاح الخاص:</h3>
                <div class="key-display">
                    <div class="key-actions">
                        <button class="key-action-btn" onclick="copyKey('private-key')" title="نسخ">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="key-action-btn" onclick="clearKey('private-key')" title="حذف">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div id="private-key"></div>
                </div>
                
                <button onclick="downloadKeys()" data-i18n="downloadKeysButton">تحميل المفاتيح</button>
            </div>
        </div>
        
        <!-- قسم توليد كلمات السر -->
        <div id="password-tab" class="tab-content">
            <h2 data-i18n="passwordGeneratorTitle">مولد كلمات السر و Passphrase</h2>
            
            <div class="password-options">
                <div class="option-group">
                    <label for="password-length" data-i18n="passwordLengthLabel">طول كلمة السر:</label>
                    <input type="range" id="password-length" min="8" max="32" value="12">
                    <span id="password-length-value">12</span> <span data-i18n="characters">حرف</span>
                </div>
                
                <div class="option-group">
                    <label for="include-uppercase" data-i18n="includeUppercaseLabel">يشمل أحرف كبيرة:</label>
                    <input type="checkbox" id="include-uppercase" checked>
                </div>
                
                <div class="option-group">
                    <label for="include-numbers" data-i18n="includeNumbersLabel">يشمل أرقام:</label>
                    <input type="checkbox" id="include-numbers" checked>
                </div>
                
                <div class="option-group">
                    <label for="include-symbols" data-i18n="includeSymbolsLabel">يشمل رموز:</label>
                    <input type="checkbox" id="include-symbols">
                </div>
            </div>
            
            <button onclick="generatePassword()" data-i18n="generatePasswordButton">توليد كلمة السر</button>
            <button onclick="generatePassphrase()" data-i18n="generatePassphraseButton">توليد Passphrase</button>
            <button onclick="generateUsername()" data-i18n="generateUsernameButton">توليد اسم مستخدم</button>
            
            <div class="result-area">
                <h3 data-i18n="generatedPasswordLabel">كلمة السر المولدة:</h3>
                <div class="password-result">
                    <div class="password-text" id="generated-password"></div>
                    <button class="key-action-btn" onclick="copyPassword()" title="نسخ">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
                <div class="strength-meter">
                    <div class="strength-fill" id="password-strength"></div>
                </div>
                
                <h3 data-i18n="passphraseLabel" style="margin-top: 20px;">Passphrase:</h3>
                <div class="password-result">
                    <div class="password-text" id="generated-passphrase"></div>
                    <button class="key-action-btn" onclick="copyPassphrase()" title="نسخ">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
                
                <h3 data-i18n="usernameLabel" style="margin-top: 20px;">اسم المستخدم:</h3>
                <div class="password-result">
                    <div class="password-text" id="generated-username"></div>
                    <button class="key-action-btn" onclick="copyUsername()" title="نسخ">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- قسم التشفير في الصور -->
        <div id="stego-tab" class="tab-content">
            <h2 data-i18n="stegoTitle">التشفير في الصور (Steganography) <span class="library-badge">CryptoJS</span></h2>
            
            <div class="form-group">
                <label for="image-upload" data-i18n="selectImageLabel">اختر صورة:</label>
                <input type="file" id="image-upload" accept="image/*">
            </div>
            
            <div class="form-group">
                <label for="secret-message" data-i18n="secretMessageLabel">الرسالة السرية:</label>
                <textarea id="secret-message" data-i18n-ph="secretMessagePlaceholder"></textarea>
            </div>
            
            <div class="form-group">
                <label for="stego-password" data-i18n="stegoPasswordLabel">كلمة المرور (لحماية الرسالة):</label>
                <input type="password" id="stego-password" data-i18n-ph="stegoPasswordPlaceholder">
            </div>
            
            <div class="form-group">
                <label for="stego-algorithm" data-i18n="stegoAlgorithmLabel">خوارزمية التشفير:</label>
                <select id="stego-algorithm">
                    <option value="aes" data-i18n="aesAlgorithm">AES (مستحسن)</option>
                    <option value="tripledes" data-i18n="tripleDesAlgorithm">Triple DES</option>
                    <option value="rabbit" data-i18n="rabbitAlgorithm">Rabbit</option>
                    <option value="rc4" data-i18n="rc4Algorithm">RC4</option>
                </select>
            </div>
            
            <button onclick="hideMessage()" data-i18n="hideMessageButton">إخفاء الرسالة في الصورة</button>
            <button onclick="extractMessage()" data-i18n="extractMessageButton">استخراج الرسالة من الصورة</button>
            
            <div class="result-area">
                <h3 data-i18n="outputImageLabel">الصورة الناتجة:</h3>
                <canvas id="canvas" style="display: none;"></canvas>
                <img id="output-image" style="max-width: 100%; display: none;">
                
                <h3 data-i18n="extractedMessageLabel">الرسالة المستخرجة:</h3>
                <div id="extracted-message"></div>
                
                <a id="download-link" style="display: none;" data-i18n="downloadImageLink">تحميل الصورة المعدلة</a>
            </div>
        </div>
        
        <!-- قسم معلومات المكتبات -->
        <div id="info-tab" class="tab-content">
            <h2 data-i18n="infoTitle">معلومات عن مكتبات التشفير</h2>
            
            <div class="form-group">
                <h3 data-i18n="webCryptoTitle">Web Crypto API</h3>
                <p data-i18n="webCryptoDescription">واجهة برمجة تطبيقات قوية مدمجة في المتصفحات الحديثة توفر وظائف تشفير أساسية. 
                   تتميز بالأداء العالي والأمان الموثوق حيث يتم تنفيذها على مستوى المتصفح.</p>
                <ul>
                    <li data-i18n="webCryptoFeature1">مدعومة في Chrome 37+, Firefox 34+, Edge 79+, Safari 11+</li>
                    <li data-i18n="webCryptoFeature2">لا تحتاج إلى إضافة مكتبات خارجية</li>
                    <li data-i18n="webCryptoFeature3">أداء عالي بسبب التنفيذ المُحسّن</li>
                    <li data-i18n="webCryptoFeature4">توفر خوارزميات تشفير قياسية</li>
                </ul>
            </div>
            
            <div class="form-group">
                <h3 data-i18n="cryptoJSTitle">CryptoJS</h3>
                <p data-i18n="cryptoJSDescription">مكتبة JavaScript شائعة لتشفير البيانات توفر مجموعة واسعة من الخوارزميات.
                   سهلة الاستخدام وتوفر توافقًا مع المتصفحات القديمة.</p>
                <ul>
                    <li data-i18n="cryptoJSFeature1">تدعم مجموعة واسعة من خوارزميات التشفير</li>
                    <li data-i18n="cryptoJSFeature2">سهلة الاستخدام مع وثائق جيدة</li>
                    <li data-i18n="cryptoJSFeature3">تعمل على جميع المتصفحات تقريبًا</li>
                    <li data-i18n="cryptoJSFeature4">حجمها أكبر من Web Crypto API</li>
                </ul>
            </div>
            
            <div class="form-group">
                <h3 data-i18n="whenToUseTitle">متى تستخدم كل مكتبة؟</h3>
                <p data-i18n="webCryptoUseCase"><strong>Web Crypto API</strong>: عندما تستهدف متصفحات حديثة وتحتاج لأفضل أداء وأمان.</p>
                <p data-i18n="cryptoJSUseCase"><strong>CryptoJS</strong>: عندما تحتاج دعم متصفحات أقدم أو خوارزميات غير متوفرة في Web Crypto API.</p>
                <p data-i18n="basicUseCase"><strong>التشفير الأساسي</strong>: للأغراض التعليمية أو التطبيقات غير الحرجة.</p>
            </div>
        </div>
        
        <footer>
            <p>© 2023 موقع تشفير الرسائل المتقدم | Web Crypto API + CryptoJS</p>
        </footer>
    </div>

    <script>
        // دعم التعددية اللغوية
        const translations = {
            ar: {
                // النصوص العربية
                siteTitle: "موقع تشفير الرسائل المتقدم مع مكتبات خارجية",
                siteDescription: "أدوات متكاملة لتشفير الرسائل وتوليد المفاتيح باستخدام مكتبات التشفير القوية",
                encryptTab: "تشفير/فك التشفير",
                keysTab: "توليد المفاتيح",
                passwordTab: "توليد كلمات السر",
                stegoTab: "التشفير في الصور",
                infoTab: "معلومات المكتبات",
                encryptTitle: "تشفير وفك تشفير الرسائل",
                algorithmLabel: "اختر خوارزمية التشفير:",
                caesarAlgorithm: "شيفرة قيصر (Caesar Cipher)",
                aesBasicAlgorithm: "AES أساسي (تشفير داخلي)",
                aesCryptoJSAlgorithm: "AES باستخدام CryptoJS",
                aesWebCryptoAlgorithm: "AES باستخدام Web Crypto API",
                rsaBasicAlgorithm: "RSA أساسي (تشفير داخلي)",
                rsaCryptoJSAlgorithm: "RSA باستخدام CryptoJS",
                base64Algorithm: "Base64 (ترميز)",
                messageLabel: "النص المراد تشفيره/فك تشفيره:",
                messagePlaceholder: "أدخل النص هنا...",
                keyLabel: "مفتاح التشفير:",
                keyPlaceholder: "أدخل المفتاح...",
                passwordLabel: "كلمة المرور (اختياري):",
                passwordPlaceholder: "أدخل كلمة مرور إضافية...",
                advancedOptions: "خيارات متقدمة",
                iterationsLabel: "عدد التكرارات (لتعزيز الأمان):",
                encryptButton: "تشفير",
                decryptButton: "فك التشفير",
                resultLabel: "النتيجة:",
                keysTitle: "توليد مفاتيح التشفير",
                keyTypeLabel: "نوع المفتاح:",
                rsaKey: "RSA (مفتاح عام/خاص)",
                aesKey: "AES (مفتاح متماثل)",
                eccKey: "ECC (منحنيات إهليلجية)",
                keySizeLabel: "حجم المفتاح:",
                key128: "128-بت (AES)",
                key256: "256-بت (AES)",
                key2048: "2048-بت (RSA)",
                key4096: "4096-بت (RSA)",
                generateKeysButton: "توليد المفاتيح",
                publicKeyLabel: "المفتاح العام:",
                privateKeyLabel: "المفتاح الخاص:",
                downloadKeysButton: "تحميل المفاتيح",
                passwordGeneratorTitle: "مولد كلمات السر و Passphrase",
                passwordLengthLabel: "طول كلمة السر:",
                characters: "حرف",
                includeUppercaseLabel: "يشمل أحرف كبيرة:",
                includeNumbersLabel: "يشمل أرقام:",
                includeSymbolsLabel: "يشمل رموز:",
                generatePasswordButton: "توليد كلمة السر",
                generatePassphraseButton: "توليد Passphrase",
                generateUsernameButton: "توليد اسم مستخدم",
                generatedPasswordLabel: "كلمة السر المولدة:",
                passphraseLabel: "Passphrase:",
                usernameLabel: "اسم المستخدم:",
                stegoTitle: "التشفير في الصور (Steganography)",
                selectImageLabel: "اختر صورة:",
                secretMessageLabel: "الرسالة السرية:",
                secretMessagePlaceholder: "أدخل الرسالة التي تريد إخفاءها في الصورة...",
                stegoPasswordLabel: "كلمة المرور (لحماية الرسالة):",
                stegoPasswordPlaceholder: "كلمة المرور...",
                stegoAlgorithmLabel: "خوارزمية التشفير:",
                aesAlgorithm: "AES (مستحسن)",
                tripleDesAlgorithm: "Triple DES",
                rabbitAlgorithm: "Rabbit",
                rc4Algorithm: "RC4",
                hideMessageButton: "إخفاء الرسالة في الصورة",
                extractMessageButton: "استخراج الرسالة من الصورة",
                outputImageLabel: "الصورة الناتجة:",
                extractedMessageLabel: "الرسالة المستخرجة:",
                downloadImageLink: "تحميل الصورة المعدلة",
                infoTitle: "معلومات عن مكتبات التشفير",
                webCryptoTitle: "Web Crypto API",
                webCryptoDescription: "واجهة برمجة تطبيقات قوية مدمجة في المتصفحات الحديثة توفر وظائف تشفير أساسية. تتميز بالأداء العالي والأمان الموثوق حيث يتم تنفيذها على مستوى المتصفح.",
                webCryptoFeature1: "مدعومة في Chrome 37+, Firefox 34+, Edge 79+, Safari 11+",
                webCryptoFeature2: "لا تحتاج إلى إضافة مكتبات خارجية",
                webCryptoFeature3: "أداء عالي بسبب التنفيذ المُحسّن",
                webCryptoFeature4: "توفر خوارزميات تشفير قياسية",
                cryptoJSTitle: "CryptoJS",
                cryptoJSDescription: "مكتبة JavaScript شائعة لتشفير البيانات توفر مجموعة واسعة من الخوارزميات. سهلة الاستخدام وتوفر توافقًا مع المتصفحات القديمة.",
                cryptoJSFeature1: "تدعم مجموعة واسعة من خوارزميات التشفير",
                cryptoJSFeature2: "سهلة الاستخدام مع وثائق جيدة",
                cryptoJSFeature3: "تعمل على جميع المتصفحات تقريبًا",
                cryptoJSFeature4: "حجمها أكبر من Web Crypto API",
                whenToUseTitle: "متى تستخدم كل مكتبة؟",
                webCryptoUseCase: "Web Crypto API: عندما تستهدف متصفحات حديثة وتحتاج لأفضل أداء وأمان.",
                cryptoJSUseCase: "CryptoJS: عندما تحتاج دعم متصفحات أقدم أو خوارزميات غير متوفرة في Web Crypto API.",
                basicUseCase: "التشفير الأساسي: للأغراض التعليمية أو التطبيقات غير الحرجة."
            },
            en: {
                // English texts
                siteTitle: "Advanced Encryption Site with External Libraries",
                siteDescription: "Comprehensive tools for message encryption and key generation using powerful encryption libraries",
                encryptTab: "Encrypt/Decrypt",
                keysTab: "Generate Keys",
                passwordTab: "Password Generator",
                stegoTab: "Image Steganography",
                infoTab: "Library Info",
                encryptTitle: "Encrypt and Decrypt Messages",
                algorithmLabel: "Select Encryption Algorithm:",
                caesarAlgorithm: "Caesar Cipher",
                aesBasicAlgorithm: "Basic AES (Internal)",
                aesCryptoJSAlgorithm: "AES using CryptoJS",
                aesWebCryptoAlgorithm: "AES using Web Crypto API",
                rsaBasicAlgorithm: "Basic RSA (Internal)",
                rsaCryptoJSAlgorithm: "RSA using CryptoJS",
                base64Algorithm: "Base64 (Encoding)",
                messageLabel: "Text to Encrypt/Decrypt:",
                messagePlaceholder: "Enter text here...",
                keyLabel: "Encryption Key:",
                keyPlaceholder: "Enter key...",
                passwordLabel: "Password (optional):",
                passwordPlaceholder: "Enter additional password...",
                advancedOptions: "Advanced Options",
                iterationsLabel: "Iterations (for enhanced security):",
                encryptButton: "Encrypt",
                decryptButton: "Decrypt",
                resultLabel: "Result:",
                keysTitle: "Generate Encryption Keys",
                keyTypeLabel: "Key Type:",
                rsaKey: "RSA (Public/Private Key)",
                aesKey: "AES (Symmetric Key)",
                eccKey: "ECC (Elliptic Curve)",
                keySizeLabel: "Key Size:",
                key128: "128-bit (AES)",
                key256: "256-bit (AES)",
                key2048: "2048-bit (RSA)",
                key4096: "4096-bit (RSA)",
                generateKeysButton: "Generate Keys",
                publicKeyLabel: "Public Key:",
                privateKeyLabel: "Private Key:",
                downloadKeysButton: "Download Keys",
                passwordGeneratorTitle: "Password and Passphrase Generator",
                passwordLengthLabel: "Password Length:",
                characters: "characters",
                includeUppercaseLabel: "Include uppercase letters:",
                includeNumbersLabel: "Include numbers:",
                includeSymbolsLabel: "Include symbols:",
                generatePasswordButton: "Generate Password",
                generatePassphraseButton: "Generate Passphrase",
                generateUsernameButton: "Generate Username",
                generatedPasswordLabel: "Generated Password:",
                passphraseLabel: "Passphrase:",
                usernameLabel: "Username:",
                stegoTitle: "Image Steganography",
                selectImageLabel: "Select Image:",
                secretMessageLabel: "Secret Message:",
                secretMessagePlaceholder: "Enter the message you want to hide in the image...",
                stegoPasswordLabel: "Password (to protect the message):",
                stegoPasswordPlaceholder: "Password...",
                stegoAlgorithmLabel: "Encryption Algorithm:",
                aesAlgorithm: "AES (Recommended)",
                tripleDesAlgorithm: "Triple DES",
                rabbitAlgorithm: "Rabbit",
                rc4Algorithm: "RC4",
                hideMessageButton: "Hide Message in Image",
                extractMessageButton: "Extract Message from Image",
                outputImageLabel: "Output Image:",
                extractedMessageLabel: "Extracted Message:",
                downloadImageLink: "Download Modified Image",
                infoTitle: "About Encryption Libraries",
                webCryptoTitle: "Web Crypto API",
                webCryptoDescription: "A powerful API built into modern browsers that provides basic encryption functions. It features high performance and reliable security as it is implemented at the browser level.",
                webCryptoFeature1: "Supported in Chrome 37+, Firefox 34+, Edge 79+, Safari 11+",
                webCryptoFeature2: "No external libraries needed",
                webCryptoFeature3: "High performance due to optimized implementation",
                webCryptoFeature4: "Provides standard encryption algorithms",
                cryptoJSTitle: "CryptoJS",
                cryptoJSDescription: "A popular JavaScript library for data encryption that provides a wide range of algorithms. Easy to use and provides compatibility with older browsers.",
                cryptoJSFeature1: "Supports a wide range of encryption algorithms",
                cryptoJSFeature2: "Easy to use with good documentation",
                cryptoJSFeature3: "Works on almost all browsers",
                cryptoJSFeature4: "Larger size than Web Crypto API",
                whenToUseTitle: "When to use each library?",
                webCryptoUseCase: "Web Crypto API: When targeting modern browsers and needing the best performance and security.",
                cryptoJSUseCase: "CryptoJS: When you need support for older browsers or algorithms not available in Web Crypto API.",
                basicUseCase: "Basic Encryption: For educational purposes or non-critical applications."
            }
        };

        let currentLang = 'ar';

        function changeLanguage() {
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            document.getElementById('language-btn').textContent = currentLang === 'ar' ? 'EN' : 'AR';
            document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            document.documentElement.lang = currentLang;
            
            // تحديث جميع النصوص
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[currentLang][key]) {
                    element.textContent = translations[currentLang][key];
                }
            });
            
            // تحديث العناصر النائبة
            document.querySelectorAll('[data-i18n-ph]').forEach(element => {
                const key = element.getAttribute('data-i18n-ph');
                if (translations[currentLang][key]) {
                    element.placeholder = translations[currentLang][key];
                }
            });
        }

        // وظائف التبويب
        function openTab(tabId) {
            // إخفاء جميع المحتويات
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }
            
            // إلغاء تنشيط جميع الأزرار
            const tabButtons = document.getElementsByClassName('tab-btn');
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove('active');
            }
            
            // تفعيل المحتوى والزر المحدد
            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
        }
        
        // تبديل عرض حقل المفتاح حسب الخوارزمية
        function toggleKeyInput() {
            const algorithm = document.getElementById('algorithm').value;
            const keyInput = document.getElementById('key-input');
            
            if (algorithm.includes('rsa') && !algorithm.includes('basic')) {
                keyInput.innerHTML = `
                    <label for="encryption-key" data-i18n="keyLabel">المفتاح العام (للتشفير) / الخاص (لفك التشفير):</label>
                    <textarea id="encryption-key" placeholder="أدخل المفتاح هنا..." rows="4" data-i18n-ph="keyPlaceholder"></textarea>
                `;
            } else {
                keyInput.innerHTML = `
                    <label for="encryption-key" data-i18n="keyLabel">مفتاح التشفير:</label>
                    <input type="text" id="encryption-key" placeholder="أدخل المفتاح..." data-i18n-ph="keyPlaceholder">
                `;
            }
            
            // تحديث النصوص بعد تغيير HTML
            if (currentLang === 'en') {
                changeLanguage();
            }
        }
        
        // وظائف النسخ والحذف للمفاتيح
        function copyKey(keyId) {
            const keyText = document.getElementById(keyId).textContent;
            if (!keyText) {
                alert(currentLang === 'ar' ? 'لا يوجد مفتاح للنسخ' : 'No key to copy');
                return;
            }
            
            navigator.clipboard.writeText(keyText)
                .then(() => {
                    alert(currentLang === 'ar' ? 'تم نسخ المفتاح' : 'Key copied');
                })
                .catch(err => {
                    alert(currentLang === 'ar' ? 'فشل نسخ المفتاح' : 'Failed to copy key');
                });
        }
        
        function clearKey(keyId) {
            if (confirm(currentLang === 'ar' ? 'هل تريد حذف هذا المفتاح؟' : 'Are you sure you want to delete this key?')) {
                document.getElementById(keyId).textContent = '';
            }
        }
        
        // وظائف توليد كلمات السر
        function generatePassword() {
            const length = document.getElementById('password-length').value;
            const includeUppercase = document.getElementById('include-uppercase').checked;
            const includeNumbers = document.getElementById('include-numbers').checked;
            const includeSymbols = document.getElementById('include-symbols').checked;
            
            const lowercase = 'abcdefghijklmnopqrstuvwxyz';
            const uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const numbers = '0123456789';
            const symbols = '!@#$%^&*()_+-=[]{}|;:,.<>?';
            
            let characters = lowercase;
            if (includeUppercase) characters += uppercase;
            if (includeNumbers) characters += numbers;
            if (includeSymbols) characters += symbols;
            
            let password = '';
            for (let i = 0; i < length; i++) {
                password += characters.charAt(Math.floor(Math.random() * characters.length));
            }
            
            document.getElementById('generated-password').textContent = password;
            updatePasswordStrength(password);
        }
        
        function generatePassphrase() {
            const words = [
                'apple', 'banana', 'carrot', 'dolphin', 'elephant', 
                'flamingo', 'giraffe', 'honey', 'iguana', 'jaguar',
                'koala', 'lemon', 'mango', 'narwhal', 'orange',
                'penguin', 'quince', 'rabbit', 'strawberry', 'tiger',
                'umbrella', 'violet', 'watermelon', 'xylophone', 'yellow', 'zebra'
            ];
            
            let passphrase = '';
            for (let i = 0; i < 4; i++) {
                passphrase += words[Math.floor(Math.random() * words.length)];
                if (i < 3) passphrase += '-';
            }
            
            document.getElementById('generated-passphrase').textContent = passphrase;
        }
        
        function generateUsername() {
            const adjectives = ['cool', 'happy', 'brave', 'smart', 'quick', 'wise', 'gentle', 'proud'];
            const nouns = ['lion', 'eagle', 'wolf', 'dragon', 'phoenix', 'tiger', 'bear', 'hawk'];
            
            const adjective = adjectives[Math.floor(Math.random() * adjectives.length)];
            const noun = nouns[Math.floor(Math.random() * nouns.length)];
            const number = Math.floor(Math.random() * 1000);
            
            const username = `${adjective}_${noun}${number}`;
            document.getElementById('generated-username').textContent = username;
        }
        
        function updatePasswordStrength(password) {
            let strength = 0;
            if (password.length >= 8) strength += 20;
            if (password.length >= 12) strength += 20;
            if (/[A-Z]/.test(password)) strength += 20;
            if (/[0-9]/.test(password)) strength += 20;
            if (/[^A-Za-z0-9]/.test(password)) strength += 20;
            
            const strengthElement = document.getElementById('password-strength');
            strengthElement.style.width = strength + '%';
            
            if (strength < 40) {
                strengthElement.style.backgroundColor = '#e74c3c';
            } else if (strength < 80) {
                strengthElement.style.backgroundColor = '#f39c12';
            } else {
                strengthElement.style.backgroundColor = '#2ecc71';
            }
        }
        
        function copyPassword() {
            copyToClipboard('generated-password', 'password');
        }
        
        function copyPassphrase() {
            copyToClipboard('generated-passphrase', 'passphrase');
        }
        
        function copyUsername() {
            copyToClipboard('generated-username', 'username');
        }
        
        function copyToClipboard(elementId, type) {
            const text = document.getElementById(elementId).textContent;
            if (!text) {
                alert(currentLang === 'ar' ? `لا يوجد ${type} للنسخ` : `No ${type} to copy`);
                return;
            }
            
            navigator.clipboard.writeText(text)
                .then(() => {
                    alert(currentLang === 'ar' ? `تم نسخ ${type}` : `${type} copied`);
                })
                .catch(err => {
                    alert(currentLang === 'ar' ? `فشل نسخ ${type}` : `Failed to copy ${type}`);
                });
        }
        
        // تهيئة الأحداث عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            // تحديث قيمة عرض شريط طول كلمة السر
            const lengthSlider = document.getElementById('password-length');
            const lengthValue = document.getElementById('password-length-value');
            
            lengthSlider.addEventListener('input', function() {
                lengthValue.textContent = this.value;
            });
            
            // إضافة event listener لزر تغيير اللغة
            document.getElementById('language-btn').addEventListener('click', changeLanguage);
            
            // توليد كلمة سر افتراضية عند التحميل
            generatePassword();
            generatePassphrase();
            generateUsername();
        });

        // باقي الدوال والوظائف الأخرى من الكود السابق تبقى كما هي
        // (تم اختصارها هنا لتجنب التكرار الطويل)
        
    </script>
</body>
</html>
